$(document).ready(function(){setTimeout(function(){$(".page_content").removeClass("loading")},500),$(".js-back-link").on("click",function(){$(".js-page-transition").addClass("visible");var a=0;$(".js-page-transition-item").each(function(){a+=100;var t=$(this);setTimeout(function(){t.addClass("visible")},a)}),setTimeout(function(){location.href="/advencygate"},1e3)});var a=$("#list_landscapes").width(),t=$("#list_landscapes").height(),e="",i=new Audio("assets/zoom_in.wav"),s=new Audio("assets/zoom_out.wav"),o=new Audio("assets/transition.wav"),n=String.fromCharCode;function l(a){var t=a.attr("id"),e="",i="";switch(a.find(".list_colors li").each(function(){i+=$(this).find("span").attr("data-text")}),t){case"img01":e="PistanquetteSparpatrac";break;case"img02":e="RavaponchirePhilandrageGranboumierPomplefoisseD\xe9cabongue";break;case"img03":e="MerlapoirePimpasiveTrongiscarmeMarjacrible";break;default:e=""}return i==e}function c(a){s.play(),a.removeClass("active"),$(".app_overlay").removeClass("active"),$(window).width()>1199?a.find(".inner").css({"z-index":0,width:"300px",left:0,top:0}):a.find(".inner").removeClass("active")}$(".landscape").click(function(){var e=$(this);if(!e.hasClass("active")){var s=e.position(),o=$(this).find("img"),n=o.prop("naturalWidth"),l=o.prop("naturalHeight"),c=n>945?945:n;i.play(),e.addClass("active"),$(".app_overlay").addClass("active"),$(window).width()>1199?e.find(".inner").css({"z-index":2,width:c+"px",left:(a-c)/2-s.left+"px",top:(t-l)/2-s.top+"px"}):e.find(".inner").addClass("active")}}),$(".app_overlay").click(function(){$("#pickable_colors").hasClass("active")?($("#pickable_colors").removeClass("active"),setTimeout(function(){$("#pickable_colors").removeClass("bottom")},300)):c($(".landscape.active"))}),$(".landscape:not(.active) .list_colors").click(function(a){a.stopPropagation()}),$(".list_colors span").click(function(a){if($("#pickable_colors").hasClass("active")&&e.is($(this)))$("#pickable_colors").removeClass("active"),setTimeout(function(){$("#pickable_colors").removeClass("bottom")},300);else{var t=(e=$(this)).parent().index();$(this).closest(".list_colors").hasClass("bottom")?($("#pickable_colors").addClass("bottom"),setTimeout(function(){$("#pickable_colors").addClass("active"),$("#pickable_colors").attr("data-index",t)},10)):($("#pickable_colors").addClass("active"),$("#pickable_colors").attr("data-index",t))}}),$(document).mouseup(function(a){$(".list_colors span").is(a.target)||$("#pickable_colors").is(a.target)||$(".app_overlay").is(a.target)||($("#pickable_colors").removeClass("active"),setTimeout(function(){$("#pickable_colors").removeClass("bottom")},300))}),$("#pickable_colors span").click(function(a){var t=$(this),i=t.text(),s=t.attr("data-initial"),r=t.attr("data-bg");e.attr("data-text",i),e.attr("data-initial",s),e.css("background",r),function a(){var t=$(".landscape.active");if(l(t)){var e,t=$(".landscape.active");c(t),t.addClass("solved"),e=0,$(".landscape.solved").each(function(){l($(this))&&++e==$(".landscape").length&&(setTimeout(function(){$("body, #wrapper").addClass("solved"),o.play()},500),setTimeout(function(){var a,t,e,i,s;a=document.querySelector("canvas").getContext("2d"),t=220,e=n(67,76,65,86,73,67,85,76,69),i=30,s=0,a.font="35px Comic Sans MS, cursive, TSCu_Comic, sans-serif",a.lineWidth=5,a.lineJoin="round",a.globalAlpha=2/3,a.strokeStyle=a.fillStyle="#E30000",function o(){a.clearRect(i,0,60,150),a.setLineDash([220-t,t-5]),t-=5,a.strokeText(e[s],i,90),t>0?requestAnimationFrame(o):(a.fillText(e[s],i,90),t=220,i+=a.measureText(e[s++]).width+a.lineWidth*Math.random(),a.setTransform(1,0,0,1,0,3*Math.random()),a.rotate(.005*Math.random()),s<e.length&&requestAnimationFrame(o))}()},1500))})}}()}),$("#flip_board").click(function(){o.pause(),o.currentTime=0,o.play(),$("#wrapper").toggleClass("solved")})});