$(document).ready(function(){setTimeout(function(){$(".page_content").removeClass("loading")},500),$(".js-back-link").on("click",function(){$(".js-page-transition").addClass("visible");var a=0;$(".js-page-transition-item").each(function(){a+=100;var t=$(this);setTimeout(function(){t.addClass("visible")},a)}),setTimeout(function(){location.href="/advencygate"},1e3)});var a=$("#list_landscapes").width(),t=$("#list_landscapes").height(),_="",e=new Audio("assets/zoom_in.wav"),s=new Audio("assets/zoom_out.wav"),i=new Audio("assets/transition.wav"),o=String.fromCharCode;function l(a){var t=a.attr("id"),_="",e="";switch(a.find(".list_colors li").each(function(){e+=$(this).find("span").attr("data-text")}),t){case"img01":_=String.fromCharCode(80,105,115,116,97,110,113,117,101,116,116,101,83,112,97,114,112,97,116,114,97,99);break;case"img02":_=String.fromCharCode(82,97,118,97,112,111,110,99,104,105,114,101,80,104,105,108,97,110,100,114,97,103,101,71,114,97,110,98,111,117,109,105,101,114,80,111,109,112,108,101,102,111,105,115,115,101,68,233,99,97,98,111,110,103,117,101);break;case"img03":_=String.fromCharCode(77,101,114,108,97,112,111,105,114,101,80,105,109,112,97,115,105,118,101,84,114,111,110,103,105,115,99,97,114,109,101,77,97,114,106,97,99,114,105,98,108,101);break;default:_=""}return e==_}function n(a){s.play(),a.removeClass("active"),$(".app_overlay").removeClass("active"),$(window).width()>1199?a.find(".inner").css({"z-index":0,width:"300px",left:0,top:0}):a.find(".inner").removeClass("active")}$(".landscape").click(function(){var _=$(this);if(!_.hasClass("active")){var s=_.position(),i=$(this).find("img"),o=i.prop("naturalWidth"),l=i.prop("naturalHeight"),n=o>945?945:o;e.play(),_.addClass("active"),$(".app_overlay").addClass("active"),$(window).width()>1199?_.find(".inner").css({"z-index":2,width:n+"px",left:(a-n)/2-s.left+"px",top:(t-l)/2-s.top+"px"}):_.find(".inner").addClass("active")}}),$(".app_overlay").click(function(){$("#pickable_colors").hasClass("active")?($("#pickable_colors").removeClass("active"),setTimeout(function(){$("#pickable_colors").removeClass("bottom")},300)):n($(".landscape.active"))}),$(".landscape:not(.active) .list_colors").click(function(a){a.stopPropagation()}),$(".list_colors span").click(function(a){if($("#pickable_colors").hasClass("active")&&_.is($(this)))$("#pickable_colors").removeClass("active"),setTimeout(function(){$("#pickable_colors").removeClass("bottom")},300);else{var t=(_=$(this)).parent().index();$(this).closest(".list_colors").hasClass("bottom")?($("#pickable_colors").addClass("bottom"),setTimeout(function(){$("#pickable_colors").addClass("active"),$("#pickable_colors").attr("data-index",t)},10)):($("#pickable_colors").addClass("active"),$("#pickable_colors").attr("data-index",t))}}),$(document).mouseup(function(a){$(".list_colors span").is(a.target)||$("#pickable_colors").is(a.target)||$(".app_overlay").is(a.target)||($("#pickable_colors").removeClass("active"),setTimeout(function(){$("#pickable_colors").removeClass("bottom")},300))}),$("#pickable_colors span").click(function(a){var t=$(this),e=t.text(),s=t.attr("data-initial"),c=t.attr("data-bg");_.attr("data-text",e),_.attr("data-initial",s),_.css("background",c),function a(){var t=$(".landscape.active");if(l(t)){var _,t=$(".landscape.active");n(t),t.addClass("solved"),_=0,$(".landscape.solved").each(function(){l($(this))&&++_==$(".landscape").length&&(setTimeout(function(){$("body, #wrapper").addClass("solved"),i.play()},500),setTimeout(function(){var a,t,_,e,s;a=document.querySelector("canvas").getContext("2d"),t=220,_=o(67,76,65,86,73,67,85,76,69),e=30,s=0,a.font="35px Comic Sans MS, cursive, TSCu_Comic, sans-serif",a.lineWidth=5,a.lineJoin="round",a.globalAlpha=2/3,a.strokeStyle=a.fillStyle="#E30000",function i(){a.clearRect(e,0,60,150),a.setLineDash([220-t,t-5]),t-=5,a.strokeText(_[s],e,90),t>0?requestAnimationFrame(i):(a.fillText(_[s],e,90),t=220,e+=a.measureText(_[s++]).width+a.lineWidth*Math.random(),a.setTransform(1,0,0,1,0,3*Math.random()),a.rotate(.005*Math.random()),s<_.length&&requestAnimationFrame(i))}()},1500))})}}()}),$("#flip_board").click(function(){i.pause(),i.currentTime=0,i.play(),$("#wrapper").toggleClass("solved")})});